---
title: "XcodeがArchive時に延々とキーチェーンへのアクセス許可を求めてくる件"
date: "2015-03-05"
layout: post
---

なんか度々ハマってるのでメモ。以下チェック項目。

# 証明書(と秘密鍵)の場所
Archiveビルド時に利用する証明書は”ログイン”キーチェーンに入っているか。もし”システム”キーチェーンに入っていると
後述の秘密鍵のアクセス制御がうまくいかないので、ログインに移動させておく。

# 秘密鍵のアクセス制御
![](/images/2014/03/correct-certificate.png)
開発証明書とセットで保存されている証明書(鍵マークのやつ)をダブルクリック。

**アクセス制御** タブで **この項目の使用をすべてのアプリケーションに許可** がチェックされているか確認。
アクセスを許可する前に確認がチェックされていたら変更する。

![](/images/2014/03/certificate-access-control.png)

証明書と秘密鍵が”システム”キーチェーンに入っている場合、いくらこの設定を変えて保存しても変更が反映されないという現象があった。

謎なんだけど、ログインキーチェーンに証明書を置いておくことで解決する。
